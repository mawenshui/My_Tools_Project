# 代码规范检查清单

## 使用说明
本检查清单用于代码提交前的自检，确保代码符合项目规范要求。请在提交代码前逐项检查。

## 1. 命名规范检查

### 1.1 类名检查
- [ ] 类名使用帕斯卡命名法 (PascalCase)
- [ ] 类名具有描述性，能够清楚表达类的用途
- [ ] 避免使用缩写，除非是广泛认知的缩写
- [ ] 示例: `SSHClient` ✓, `sshclient` ✗, `SC` ✗

### 1.2 函数名检查
- [ ] 函数名使用驼峰命名法 (camelCase)
- [ ] 槽函数使用 `on_` 前缀
- [ ] 函数名能够清楚表达函数功能
- [ ] 布尔返回值函数使用 `is`、`has`、`can` 等前缀
- [ ] 示例: `connectToHost()` ✓, `on_connectButton_clicked()` ✓

### 1.3 变量名检查
- [ ] 成员变量使用 `m_` 前缀
- [ ] 局部变量使用驼峰命名法
- [ ] 常量使用全大写加下划线
- [ ] 变量名具有描述性，避免使用单字母变量（除循环计数器）
- [ ] 示例: `m_sshClient` ✓, `hostAddress` ✓, `MAX_RETRY_COUNT` ✓

### 1.4 文件名检查
- [ ] 头文件使用 `.h` 扩展名
- [ ] 源文件使用 `.cpp` 扩展名
- [ ] 文件名与主要类名保持一致
- [ ] 使用小写字母，单词间无分隔符
- [ ] 示例: `sshclient.h` ✓, `SSHClient.h` ✗

## 2. 代码格式检查

### 2.1 缩进和空格
- [ ] 使用4个空格进行缩进，不使用Tab字符
- [ ] 运算符前后添加空格
- [ ] 逗号后添加空格
- [ ] 函数参数列表格式正确
- [ ] 示例: `int result = a + b;` ✓, `int result=a+b;` ✗

### 2.2 大括号风格
- [ ] 使用Allman风格，大括号独占一行
- [ ] 即使只有一行代码也使用大括号
- [ ] 大括号对齐正确
```cpp
// 正确示例
if (condition)
{
    doSomething();
}

// 错误示例
if (condition) {
    doSomething();
}
```

### 2.3 行长度和换行
- [ ] 每行代码不超过120个字符
- [ ] 超长行进行适当换行
- [ ] 换行后的代码正确缩进
- [ ] 函数参数过多时进行换行

### 2.4 空行使用
- [ ] 类定义前后有空行
- [ ] 函数定义之间有空行
- [ ] 逻辑块之间有空行分隔
- [ ] 文件末尾有一个空行

## 3. 注释规范检查

### 3.1 文件头注释
- [ ] 每个文件都有文件头注释
- [ ] 包含文件名、简要描述、作者、日期
- [ ] 使用标准的Doxygen格式
```cpp
/**
 * @file filename.h
 * @brief 文件简要描述
 * @author 作者姓名
 * @date 创建日期
 */
```

### 3.2 类注释
- [ ] 每个类都有详细的类注释
- [ ] 说明类的用途和主要功能
- [ ] 包含使用示例（如果复杂）
- [ ] 使用Doxygen格式

### 3.3 函数注释
- [ ] 公有函数都有详细注释
- [ ] 包含参数说明和返回值说明
- [ ] 说明函数的副作用和注意事项
- [ ] 复杂的私有函数也需要注释

### 3.4 行内注释
- [ ] 复杂逻辑有行内注释说明
- [ ] 注释内容准确，与代码保持同步
- [ ] 避免显而易见的注释
- [ ] 使用中文注释，表达清晰

## 4. 代码结构检查

### 4.1 头文件结构
- [ ] 包含防护宏或#pragma once
- [ ] #include顺序正确（系统头文件 → Qt头文件 → 项目头文件）
- [ ] 前向声明优于#include（在可能的情况下）
- [ ] 避免在头文件中使用using namespace

### 4.2 类结构
- [ ] 访问控制符顺序：public → protected → private
- [ ] 成员变量放在类的末尾
- [ ] 构造函数和析构函数放在开头
- [ ] 相关函数分组放置

### 4.3 函数结构
- [ ] 函数长度适中（一般不超过50行）
- [ ] 单一职责原则，一个函数只做一件事
- [ ] 参数数量合理（一般不超过5个）
- [ ] 复杂函数拆分为多个小函数

## 5. Qt特定规范检查

### 5.1 信号槽使用
- [ ] 信号声明在signals:区域
- [ ] 槽函数声明在private slots:或public slots:区域
- [ ] 使用新式连接语法（推荐）
- [ ] 连接检查返回值
```cpp
// 推荐
connect(button, &QPushButton::clicked, this, &MyClass::onButtonClicked);

// 避免
connect(button, SIGNAL(clicked()), this, SLOT(onButtonClicked()));
```

### 5.2 内存管理
- [ ] 正确使用Qt的父子对象关系
- [ ] 手动分配的对象有对应的delete
- [ ] 使用智能指针管理资源（适当时）
- [ ] 避免内存泄漏

### 5.3 字符串处理
- [ ] 优先使用QString而不是std::string
- [ ] 使用QString的便利方法
- [ ] 注意字符编码问题
- [ ] 避免不必要的字符串拷贝

## 6. 错误处理检查

### 6.1 异常安全
- [ ] 不使用C++异常，使用Qt的错误处理机制
- [ ] 检查函数返回值
- [ ] 使用信号报告错误
- [ ] 资源获取即初始化(RAII)原则

### 6.2 错误信息
- [ ] 错误信息具体、有用
- [ ] 提供解决方案建议
- [ ] 支持中文错误提示
- [ ] 错误级别设置正确

### 6.3 边界条件
- [ ] 检查空指针
- [ ] 检查数组越界
- [ ] 检查除零错误
- [ ] 处理网络超时

## 7. 性能检查

### 7.1 算法效率
- [ ] 选择合适的数据结构
- [ ] 避免不必要的循环
- [ ] 减少内存分配次数
- [ ] 使用const引用传递大对象

### 7.2 UI响应性
- [ ] 避免在UI线程中执行耗时操作
- [ ] 使用异步操作处理网络请求
- [ ] 适当使用进度指示器
- [ ] 及时更新UI状态

### 7.3 资源使用
- [ ] 及时释放不需要的资源
- [ ] 避免内存泄漏
- [ ] 合理使用缓存
- [ ] 监控资源使用情况

## 8. 安全检查

### 8.1 输入验证
- [ ] 验证所有用户输入
- [ ] 防止命令注入攻击
- [ ] 限制输入长度和格式
- [ ] 转义特殊字符

### 8.2 敏感数据处理
- [ ] 密码等敏感信息不记录到日志
- [ ] 及时清理内存中的敏感数据
- [ ] 使用安全的随机数生成器
- [ ] 正确设置文件权限

### 8.3 进程安全
- [ ] 限制子进程权限
- [ ] 设置进程超时
- [ ] 安全地终止进程
- [ ] 验证外部命令路径

## 9. 测试检查

### 9.1 单元测试
- [ ] 核心功能有对应的单元测试
- [ ] 测试覆盖主要代码路径
- [ ] 测试边界条件和错误情况
- [ ] 测试用例命名清晰

### 9.2 集成测试
- [ ] 测试模块间交互
- [ ] 测试完整用户流程
- [ ] 跨平台兼容性测试
- [ ] 性能回归测试

## 10. 文档检查

### 10.1 代码文档
- [ ] API文档完整准确
- [ ] 复杂算法有详细说明
- [ ] 配置选项有说明文档
- [ ] 示例代码可运行

### 10.2 用户文档
- [ ] 安装说明清晰
- [ ] 使用教程完整
- [ ] 常见问题解答
- [ ] 更新日志详细

## 检查完成确认

- [ ] 所有检查项目都已完成
- [ ] 代码编译无警告
- [ ] 单元测试全部通过
- [ ] 功能测试验证通过
- [ ] 代码审查意见已处理
- [ ] 文档已同步更新

## 提交前最终检查

- [ ] 提交信息格式正确
- [ ] 只提交相关的文件修改
- [ ] 没有提交临时文件或调试代码
- [ ] 版本号更新（如需要）
- [ ] 更新日志已记录（如需要）

---

**使用建议**:
1. 将此清单打印或保存为书签，方便随时查看
2. 可以根据项目具体情况调整检查项目
3. 建议团队定期回顾和更新此清单
4. 新团队成员应熟读此清单并严格执行

**检查者**: _______________  
**检查日期**: _______________  
**代码版本**: _______________